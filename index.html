<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>COLLINS MUTHURI - A Civil Engineer and Trainer</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-color: #f0f2f5;
      --section-bg: #fff;
      --text-color: #2c3e50;
      --link-hover: #0073e6;
    }
    [data-theme="dark"] {
      --bg-color: #1a1a1a;
      --section-bg: #2c2c2c;
      --text-color: #e0e0e0;
      --link-hover: #4da8ff;
    }
    body { 
      font-family: "Times New Roman", Times, serif; 
      margin: 0; 
      padding: 0; 
      line-height: 1.6; 
      background: var(--bg-color);
      color: var(--text-color);
    }
    header {
      background: linear-gradient(135deg, #0073e6, #005bb5);
      color: #fff;
      padding: 80px 20px 60px 20px;
      text-align: center;
      position: relative;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    header h1 { 
      margin: 0; 
      font-size: 2.5rem; 
      text-transform: uppercase; 
      text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
    }
    header .tagline {
      display: block;
      font-family: 'Georgia', serif;
      font-size: 1.3rem;
      font-weight: bold;
      color: #2ecc71;
      text-decoration: underline;
      text-transform: uppercase;
      margin: 5px 0 10px;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
    }
    header p { 
      font-size: 1.2rem; 
      margin-top: 10px; 
      text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
    }
    header img.profile {
      position: absolute;
      top: 20px;
      left: 20px;
      width: 70px;
      border-radius: 50%;
      border: 2px solid #fff;
      box-shadow: 2px 2px 6px rgba(0,0,0,0.4);
      transition: transform 0.3s;
      cursor: pointer;
    }
    header img.profile:hover {
      transform: scale(1.1);
    }
    .settings-icon {
      position: absolute;
      top: 20px;
      right: 20px;
      font-size: 1.5rem;
      color: #fff;
      cursor: pointer;
      transition: transform 0.3s;
    }
    .settings-icon:hover {
      transform: rotate(90deg);
    }
    .settings-menu {
      position: fixed;
      top: 60px;
      right: 20px;
      width: 200px;
      background: #2c3e50;
      color: #fff;
      border-radius: 8px;
      overflow: hidden;
      font-size: 0.9rem;
      z-index: 1000;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
      max-height: 0;
      transition: max-height 0.3s ease-out;
    }
    .settings-menu.active {
      max-height: 300px;
    }
    .settings-menu h3 {
      background: linear-gradient(135deg, #1a242f, #16202a);
      margin: 0;
      padding: 10px;
      text-align: center;
      font-size: 1rem;
    }
    .settings-menu ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .settings-menu ul li {
      border-bottom: 1px solid #444;
      padding: 10px;
    }
    .settings-menu ul li label {
      display: block;
      color: #fff;
      cursor: pointer;
    }
    .settings-menu ul li input[type="file"] {
      display: block;
      margin-top: 5px;
      color: #fff;
    }
    .settings-menu ul li a, .settings-menu ul li button {
      display: block;
      padding: 8px;
      text-decoration: none;
      color: #fff;
      font-size: 0.85rem;
      transition: background 0.3s;
    }
    .settings-menu ul li a:hover, .settings-menu ul li button:hover {
      background: linear-gradient(135deg, #0073e6, #005bb5);
    }
    nav { 
      text-align: center; 
      padding: 10px; 
      background: var(--section-bg); 
    }
    nav a { 
      margin: 0 15px; 
      text-decoration: none; 
      color: var(--text-color); 
      font-weight: bold; 
      transition: color 0.3s; 
    }
    nav a:hover { 
      color: var(--link-hover); 
    }
    .dropdown {
      position: fixed;
      top: 20px;
      right: 60px;
      width: 160px;
      background: #2c3e50;
      color: #fff;
      border-radius: 8px;
      overflow: hidden;
      font-size: 0.9rem;
      z-index: 1000;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }
    .dropdown h3 {
      background: linear-gradient(135deg, #1a242f, #16202a);
      margin: 0;
      padding: 10px;
      cursor: pointer;
      text-align: center;
      font-size: 1rem;
      transition: background 0.3s;
    }
    .dropdown h3:hover {
      background: linear-gradient(135deg, #0073e6, #005bb5);
    }
    .dropdown ul {
      list-style: none;
      padding: 0;
      margin: 0;
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease-out;
    }
    .dropdown.active ul {
      max-height: 500px;
    }
    .dropdown ul li {
      border-bottom: 1px solid #444;
    }
    .dropdown ul li a {
      display: block;
      padding: 8px 10px;
      text-decoration: none;
      color: #fff;
      font-size: 0.85rem;
      transition: background 0.3s, transform 0.3s;
    }
    .dropdown ul li a:hover {
      background: linear-gradient(135deg, #0073e6, #005bb5);
      transform: translateX(5px);
    }
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.6);
      z-index: 2000;
      justify-content: center;
      align-items: center;
    }
    .modal-content {
      width: 80%;
      max-width: 600px;
      max-height: 80vh;
      background: var(--section-bg);
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
      position: relative;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      color: var(--text-color);
    }
    .modal-image {
      width: 100%;
      max-width: 400px;
      height: 400px;
      object-fit: cover;
      border-radius: 8px;
      border: 2px solid #fff;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    }
    .close-button {
      position: absolute;
      top: -15px;
      right: -15px;
      font-size: 1.5rem;
      color: #fff;
      background: #2c3e50;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      text-align: center;
      line-height: 30px;
      cursor: pointer;
      transition: background 0.3s;
    }
    .close-button:hover {
      background: var(--link-hover);
    }
    #documentIframe {
      width: 100%;
      height: 60vh;
      border: none;
    }
    section { 
      padding: 40px 20px; 
      max-width: 900px; 
      margin: auto; 
      background: var(--section-bg);
      margin-bottom: 20px;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    h2 { 
      color: var(--text-color); 
      margin-bottom: 20px; 
    }
    #contact {
      padding: 40px 20px;
      max-width: 900px;
      margin: auto;
      background: linear-gradient(135deg, var(--section-bg), #f0f4f8);
      border-radius: 12px;
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
      text-align: center;
    }
    #contact .contact-box {
      position: relative;
      padding: 20px;
      border: 4px solid transparent;
      border-radius: 12px;
      background: linear-gradient(135deg, var(--section-bg), #ffffff) padding-box,
                  linear-gradient(45deg, #2ecc71, #3498db) border-box;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    #contact .contact-box::before {
      content: '✿';
      position: absolute;
      top: -15px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 2rem;
      color: #2ecc71;
      background: var(--section-bg);
      padding: 0 10px;
    }
    #contact h2 {
      color: var(--text-color);
      font-family: 'Gabriola', 'Georgia', serif;
      font-size: 2rem;
      margin-bottom: 30px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    .socials {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin: 20px 0;
    }
    .socials a {
      font-size: 2rem;
      color: var(--text-color);
      transition: transform 0.3s ease, color 0.3s ease, background 0.3s ease;
      padding: 10px;
      border-radius: 50%;
    }
    .socials a:hover {
      color: #fff;
      background: var(--link-hover);
      transform: scale(1.2) rotate(5deg);
    }
    .x-icon {
      font-family: 'Roboto', 'Times New Roman', Times, serif;
      font-weight: bold;
      font-size: 1.8rem;
      color: var(--text-color);
      transition: transform 0.3s ease, color 0.3s ease, background 0.3s ease;
      padding: 10px;
      border-radius: 50%;
    }
    .x-icon:hover {
      color: #fff;
      background: var(--link-hover);
      transform: rotate(15deg) scale(1.2);
    }
    .projects .card {
      margin-bottom: 20px;
      padding: 15px;
      border-radius: 6px;
      background: var(--section-bg);
      transition: transform 0.3s, box-shadow 0.3s;
      cursor: pointer;
    }
    .projects .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 16px rgba(0,0,0,0.2);
    }
    .projects .card h3 {
      margin: 0;
      color: var(--text-color);
      font-size: 1.5rem;
      transition: color 0.3s;
    }
    .projects .card h3:hover {
      color: var(--link-hover);
    }
    .project-description {
      max-height: 0;
      overflow: hidden;
      opacity: 0;
      transition: max-height 0.3s ease-out, opacity 0.3s ease-out;
    }
    .project-description.active {
      max-height: 600px;
      opacity: 1;
      padding-top: 10px;
    }
    .project-description h4 {
      margin: 0 0 10px;
      color: var(--text-color);
      font-size: 1.2rem;
    }
    .project-description p {
      margin: 0 0 10px;
      color: var(--text-color);
    }
    .project-image {
      width: 100%;
      max-width: 300px;
      height: auto;
      border-radius: 6px;
      margin: 10px 0;
      display: block;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      cursor: pointer;
    }
    .project-divider {
      border: 0;
      height: 4px;
      background: var(--text-color);
      margin: 20px 0;
      border-radius: 2px;
    }
    a.button { 
      display: inline-block; 
      margin-top: 10px; 
      padding: 10px 15px; 
      background: #2c3e50; 
      color: #fff; 
      border-radius: 5px; 
      text-decoration: none; 
      transition: background 0.3s, transform 0.3s;
    }
    a.button:hover { 
      background: var(--link-hover); 
      transform: scale(1.05);
    }
    footer { 
      text-align: center; 
      background: #2c3e50; 
      color: #fff; 
      padding: 20px; 
      margin-top: 40px; 
    }
    .quote {
      text-align: center;
      margin: 20px 0;
      font-style: italic;
      font-size: 1.2rem;
      font-family: "Georgia", serif;
      color: var(--text-color);
    }
    @media (max-width: 768px) {
      header img.profile { width: 50px; top: 15px; left: 15px; }
      header h1 { font-size: 2rem; }
      header p { font-size: 1rem; }
      header .tagline { font-size: 1.1rem; }
      nav a { display: block; margin: 5px 0; }
      .dropdown, .settings-menu {
        width: 140px;
        top: 15px;
        right: 15px;
      }
      .dropdown { right: 55px; }
      .settings-icon { right: 15px; }
      .dropdown ul li a, .settings-menu ul li a, .settings-menu ul li button { 
        text-align: center; 
        padding: 10px; 
      }
      .modal-content {
        width: 90%;
        max-width: 95%;
        max-height: 70vh;
      }
      .modal-image {
        max-width: 300px;
        height: 300px;
      }
      #documentIframe { height: 50vh; }
      #contact h2 { font-size: 1.5rem; }
      #contact .contact-box { padding: 15px; }
      #contact .contact-box::before { font-size: 1.5rem; top: -10px; }
      .socials { gap: 15px; }
      .socials a { font-size: 1.8rem; }
      .x-icon { font-size: 1.6rem; }
      .projects .card h3 { font-size: 1.3rem; }
      .project-description h4 { font-size: 1.1rem; }
      .project-image { max-width: 200px; }
    }
  </style>
</head>
<body>
  <header>
    <img src="images/profile.png" alt="COLLINS MUTHURI" class="profile" id="profileImage" onclick="showModal()">
    <h1>COLLINS MUTHURI</h1>
    <span class="tagline">SMALL MAN WITH BIG GOD</span>
    <p>A Civil Engineer and Trainer</p>
    <i class="fas fa-bars settings-icon" onclick="toggleSettings()"></i>
  </header>

  <div class="settings-menu" id="settingsMenu">
    <h3>Settings</h3>
    <ul>
      <li>
        <label for="profilePhotoInput">Change Profile Photo</label>
        <input type="file" id="profilePhotoInput" accept="image/png,image/jpeg">
      </li>
      <li>
        <button onclick="toggleTheme()">Toggle Theme</button>
      </li>
      <li>
        <a href="#privacy">Privacy Settings</a>
      </li>
    </ul>
  </div>

  <div class="dropdown">
    <h3>📂 My Docs</h3>
    <ul>
      <li><a href="#" onclick="viewDocument('docs/birth_certificate.pdf')">Birth Certificate</a></li>
      <li><a href="#" onclick="viewDocument('docs/kcpe.pdf')">KCPE Certificate</a></li>
      <li><a href="#" onclick="viewDocument('docs/leaving_cert.pdf')">Leaving Certificate</a></li>
      <li><a href="#" onclick="viewDocument('docs/cv.pdf')">Curriculum Vitae (CV)</a></li>
      <li><a href="#" onclick="viewDocument('docs/transcripts.pdf')">Transcripts</a></li>
    </ul>
  </div>

  <div id="profileModal" class="modal">
    <div class="modal-content">
      <span class="close-button" onclick="hideModal()">&times;</span>
      <img src="images/profile.png" alt="COLLINS MUTHURI" class="modal-image" id="profileModalImage">
    </div>
  </div>

  <div id="telegramModal" class="modal">
    <div class="modal-content">
      <span class="close-button" onclick="hideTelegramModal()">&times;</span>
      <img src="images/telegram.png" alt="Telegram Channel" class="modal-image">
    </div>
  </div>

  <div id="documentModal" class="modal">
    <div class="modal-content">
      <span class="close-button" onclick="hideDocumentModal()">&times;</span>
      <iframe id="documentIframe" src="" style="width: 100%; height: 60vh; border: none;"></iframe>
      <a id="downloadButton" href="#" class="button" style="display: block; text-align: center; margin: 10px auto;">Download Document</a>
    </div>
  </div>

  <nav>
    <a href="#about">About</a>
    <a href="#projects">Projects</a>
    <a href="#contact">Contact</a>
  </nav>

  <section id="about">
    <h2>About Me</h2>
    <p>
      I am a passionate Civil Engineer and Trainer with experience in teaching, building construction,
      and technical training. I enjoy guiding students and professionals in structural design and
      practical engineering applications. Always eager to explore new projects that combine innovation
      and real-world problem-solving.
    </p>
  </section>

  <section id="projects">
    <h2>Projects</h2>
    <div class="projects">
      <div class="card">
        <h3 onclick="toggleDescription('fire-resistance')">Predicting Fire Resistance in Buildings Using Machine Learning</h3>
        <div id="fire-resistance" class="project-description">
          <h4>Predicting Fire Resistance in Buildings Using Machine Learning</h4>
          <p>By Patrick and Collins</p>
          <p>
            This project uses machine learning to predict fire resistance of buildings based on structural and material properties. It analyzes data to estimate how long structures can withstand fire, aiding engineers and architects in designing safer buildings.
          </p>
          <a href="https://building-fire-resistance.onrender.com/" target="_blank" class="button">View Project</a>
        </div>
      </div>
      <hr class="project-divider">
      <div class="card">
        <h3 onclick="toggleDescription('telegram')">Telegram Channel</h3>
        <div id="telegram" class="project-description">
          <h4>Telegram Channel</h4>
          <p>
            The home to the <b>best predictions ever</b>, sharing football games with 2+ odds and consistent daily wins.
          </p>
          <img src="images/telegram.png" alt="Telegram Channel" class="project-image" onclick="showTelegramModal()">
          <a href="https://t.me/+qB9x_srqjgc5NzU0" target="_blank" class="button">Join Telegram</a>
        </div>
      </div>
    </div>
  </section>

  <section id="contact">
    <div class="contact-box">
      <h2>Contact Me 👇</h2>
      <div class="socials">
        <a href="mailto:muthuricollins43@gmail.com" title="Email"><i class="fas fa-envelope"></i></a>
        <a href="https://wa.me/254706415082" target="_blank" title="WhatsApp"><i class="fab fa-whatsapp"></i></a>
        <a href="tel:+254706415082" title="Phone"><i class="fas fa-phone"></i></a>
        <a href="https://x.com/futbol_afc" target="_blank" title="X" class="x-icon">X</a>
      </div>
    </div>
  </section>

  <section id="privacy" style="display: none;">
    <h2>Privacy Settings</h2>
    <p>Manage your privacy preferences here. (Placeholder for future implementation)</p>
  </section>

  <div class="quote">
    “Hard work is the only way” – <b>Colloh</b>
  </div>

  <footer>
    <p>&copy; 2025 COLLINS MUTHURI | A Civil Engineer and Trainer</p>
  </footer>

  <script>
    // Settings menu toggle
    function toggleSettings() {
      const settingsMenu = document.getElementById('settingsMenu');
      settingsMenu.classList.toggle('active');
      console.log('Settings menu toggled');
    }

    document.addEventListener('click', (e) => {
      const settingsMenu = document.getElementById('settingsMenu');
      const settingsIcon = document.querySelector('.settings-icon');
      if (!settingsMenu.contains(e.target) && !settingsIcon.contains(e.target)) {
        settingsMenu.classList.remove('active');
      }
    });

    // Theme toggle
    function toggleTheme() {
      const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      document.documentElement.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);
      console.log(`Theme switched to ${newTheme}`);
    }

    // Load saved theme
    document.addEventListener('DOMContentLoaded', () => {
      const savedTheme = localStorage.getItem('theme') || 'light';
      document.documentElement.setAttribute('data-theme', savedTheme);
    });

    // Profile photo upload
    function uploadProfilePhoto() {
      const fileInput = document.getElementById('profilePhotoInput');
      const file = fileInput.files[0];
      if (!file) {
        alert('Please select an image file.');
        return;
      }
      if (!file.type.match('image/(png|jpeg)')) {
        alert('Please select a PNG or JPEG image.');
        return;
      }
      if (file.size > 5 * 1024 * 1024) {
        alert('File size must be less than 5MB.');
        return;
      }

      const formData = new FormData();
      formData.append('profilePhoto', file);

      fetch('/api/upload-profile', {
        method: 'POST',
        body: formData
      }).then(response => response.json()).then(data => {
        if (data.success) {
          const newImageUrl = `images/profile.png?${new Date().getTime()}`;
          document.getElementById('profileImage').src = newImageUrl;
          document.getElementById('profileModalImage').src = newImageUrl;
          alert('Profile photo updated successfully!');
        } else {
          alert('Error uploading photo: ' + (data.message || 'Unknown error'));
        }
      }).catch(error => {
        console.error('Upload error:', error);
        alert('Error connecting to server. Please try again.');
      });
    }

    // Dropdown toggle
    function toggleDropdown() {
      const dropdown = document.querySelector('.dropdown');
      dropdown.classList.toggle('active');
      console.log('Dropdown toggled');
    }

    document.addEventListener
